[{"title":"在超算集群上安装Environment Modules","url":"/2024/08/12/environment-modules/","content":"\n一个简易的超算集群（我也没弄过超大集群）通常由一个管理节点和一些计算节点组成。大部分的软件和库都安装在管理节点上，而计算节点一般只需要安装基本的软件就好了。\n\n一般我们将管理节点上的某个文件夹通过nfs服务分享给计算节点，这里假定为`/opt`文件夹。（nfs服务的配置就不赘述了，网上有很多资料。）注意计算节点挂载这个共享文件夹的路径也要是`/opt`，这样才好统一配置。\n\n我们的目标是把所有的软件和库都安装在管理节点的`/opt`文件夹下，从而计算节点也自动获取了这些软件和库。所以，超算上的软件最好是源代码安装，不要用包管理器。不过，各个系统最好还是统一系统，并用包管理器统一安装一次`gcc`，毕竟连`gcc`都没有实在寸步难行。\n\n这样安装的好处除了方便，不用做重复劳动之外，还避免了不同的节点安装的软件配置有差别，可能会出问题。\n\n<!-- more -->\n\n\n> 以下的安装以Debian为例，其他系统可能会有不同。\n\n## Modules安装\n\n当然，Modules也需要安装在管理节点的`/opt`文件夹下。从[Modules 官网](https://modules.sourceforge.net/)下载最新的源代码。\n\nModules依赖于`tcl`，所以需要在**每个节点**安装（因为以后需要在每个节点上运行Modules）\n```bash\napt install tcl-dev\n```\n\n然后编译源代码\n```bash\ntar -xzvf modules-5.2.0.tar.gz\ncd modules-5.2.0\n./configure --prefix=/opt/modules/\nmake\nmake install\n```\n\n### 配置Modules的路径\n\nModules是用于给软件和库配置路径的，但是在这之前要给它自己配置路径。上述安装完成之后，在每一个节点使用命令\n```bash\nln -s /opt/modules/init/profile.sh /etc/profile.d/modules.sh\n```\n这个`init/profile.sh`是Modules给你写好的配置路径的脚本，把他链接到自动运行文件夹`/etc/profile.d/`里面，就完成了配置。\n\n注意必须在每个节点都要做上述链接。并且，我们后面可能会修改`init/profile.sh`文件，所以最好使用链接而不是复制。\n\n## 配置`modulefile`文件夹\n\nModules使用modulefile文件来配置某个软件的路径，一般把我们的一些modulefile放在某个文件夹下，然后使用\n```bash\nmodule use module-file-dir\n```\n来使用这个文件夹下的的modulefile。为了使其永久生效，可以将其写到`init/profile.sh`里面去。\n\n比如，安装[Intel oneAPI](https://www.intel.cn/content/www/cn/zh/developer/tools/oneapi/toolkits.html)，它的默认路径一般是`/opt/intel/oneapi/`，而安装完成之后，通过运行`modulefiles-setup.sh`就会自动生成一大堆modulefile，在文件夹`/opt/intel/oneapi/modulefiles`下。于是你可以在`init/profile.sh`脚本最后面添加\n```bash\nmodule use /opt/intel/oneapi/modulefiles\n```\n### 编写`modulefile`\n\n对于我们自己手动安装的软件和库，需要手写`modulefile`，一个例子如下\n```tcl\n#%Module -*- tcl -*-\n\nproc ModulesHelp {} {\n        puts stderr \"arpack-ng-3.9.0, compiled with gcc-10.2.1\"\n}\n\nmodule-whatis \"arpack-ng-3.11.0, compiled with gcc-10.2.1\"\n\n# load其他模块\nmodule load lapack/3.11.0\n\n# 这里的变量其实和`bash`里面变量是一致的，比如还有`PATH`设置可执行文件路径\nprepend-path LD_LIBRARY_PATH    /opt/library/arpack-ng-3.9.0/lib\nprepend-path C_INCLUDE_PATH     /opt/library/arpack-ng-3.9.0/include\nprepend-path CPLUS_INCLUDE_PATH /opt/library/arpack-ng-3.9.0/include\nprepend-path PKG_CONFIG_PATH    /opt/library/arpack-ng-3.9.0/lib/pkgconfig\n```\n更详细的请看文档吧：[Environment Modules文档：modulefile](https://modules.readthedocs.io/en/latest/modulefile.html)。\n\n以上是针对管理员的安装知识。\n\n##  用户的使用指导\n\n超算的用户只需要知道以下知识。\n\n使用`module`系列命令来引入库。其中\n\n* `module avail`查看可以被引入的库；\n* `module load xxx`，引入某库。例如，`module load compiler/2023.0.0`引入intel的编译器组件；\n* `module list`，查看你当前引入了哪些库；\n* `module unload xxx`，取消引入某库；\n* `module purge`，清空你引入的所有库\n\n尽管书写正确的modulefile防止冲突是管理员的事情，但是用户最好也不要同时`load`某个软件的不同版本。\n\n在使用slurm提交作业时，为了保证在计算节点上的软件环境配制是正确的，你可以有两个选择。你可以使用\n```bash\n#SBATCH --get-user-env\n```\n来获取当前的环境；或者直接在提交脚本里面写好`module load xxx`。\n","tags":["编程","program","笔记","HPC"],"categories":["program","HPC"]},{"title":"How to compute CG coefficient and Wigner 3nj Symbols","url":"/2020/10/17/CG-coefficient-and-Wigner-3nj-Symbols/","content":"\n## Introduction\n\nThis blog is the theory for [https://github.com/0382/CGcoefficient.jl](https://github.com/0382/CGcoefficient.jl).\n\nIt is mainly inspired by Ref[1]. See [Jensen's code](https://github.com/ManyBodyPhysics/CENS/blob/master/MBPT/VEffective/bhf-modules.f90) for details.\n\nThe idea is to simplify 3nj Symbols to sum combinations of binominal coefficients. We can calculate binominal coefficients by Pascal's Triangle, and store them first. Then we calculate 3nj Symbols using the stored binominal coefficients. \n\nMy code is just a toy model, using Julia's own `binominal` function, and use `BigInt` to get absolute results. If you want to get the exact result, and you don't use it for numeric computing, it is really a good package.\n\n<!-- more -->\n\n## CG coefficient\n\nRef[2], P240, Section 8.2.4, Formula (20).\n\n$$\nC_{j_1m_1j_2m_2}^{j_3m_3} = \\delta_{m_3, m_1+m_2}\\left[\\dfrac{\\begin{pmatrix}2j_1 \\\\ J-2j_3\\end{pmatrix}\\begin{pmatrix}2j_2\\\\J-2j_3\\end{pmatrix}}{\\begin{pmatrix}J+1\\\\J-2j_3\\end{pmatrix}\\begin{pmatrix}2j_1\\\\j_1-m_1\\end{pmatrix}\\begin{pmatrix}2j_2 \\\\ j_2 - m_2\\end{pmatrix}\\begin{pmatrix}2j_3 \\\\ j_3-m_3\\end{pmatrix}}\\right]^{1/2} \\sum_{z} (-1)^{z}\\begin{pmatrix}J-2j_3 \\\\ z\\end{pmatrix}\\begin{pmatrix}J-2j_2 \\\\ j_1-m_1-z\\end{pmatrix}\\begin{pmatrix}J-2j_1 \\\\ j_2 + m_2 - z\\end{pmatrix}\n$$\n\nwhere, $J = j_1+j_2+j_3$. It is already combination of binominals.\n\n## 3j symbol\n\nRef[2], P236, Section 8.1.2, Formula (11).\n\n$$\n\\begin{pmatrix}j_1 & j_2 & j_3 \\\\ m_1 & m_2 & m_3\\end{pmatrix} = (-1)^{j_3+m_3+2j_1}\\dfrac{1}{\\sqrt{2j_3+1}}C_{j_1-m_1j_2-m_2}^{j_3m_3}\n$$\n\nIn my code, I use CG coefficient to calculate 3j symbol.\n\n## 6j symbol\n\nRef [2], P293, Section 9.2.1, Formula (1).\n\n$$\n\\begin{Bmatrix}j_1 & j_2 & j_3 \\\\ j_4 & j_5 & j_6\\end{Bmatrix} = \\Delta(j_1j_2j_3)\\Delta(j_4j_5j_3)\\Delta(j_1j_5j_6)\\Delta(j_4j_2j_6) \\\\\n\\times \\sum\\limits_n\\dfrac{(-1)^n(n+1)!}{(n-j_1j_2j_3)!(n-j_4j_5j_3)!(n-j_1j_5j_6)!(n-j_4j_2j_6)!(j_1j_2j_4j_5-n)!(j_1j_3j_4j_6-n)!(j_2j_3j_5j_6-n)!}\n$$\n\nHere, I use $j_1j_2j_3$ to represent $j_1+j_2+j_2$. The symbol $\\Delta(abc)$ is defined as\n\n$$\n\\Delta(abc) = \\left[\\dfrac{(a+b-c)!(a-b+c)!(-a+b+c)!}{(a+b+c+1)!}\\right]^{\\frac{1}{2}}.\n$$\n\nWe can find that\n\n$$\n\\begin{pmatrix}j_1+j_2-j_3 \\\\ n - j_4j_5j_3\\end{pmatrix} = \\dfrac{(j_1+j_2-j_3)!}{(n-j_4j_5j_3)!(j_1j_2j_4j_5-n)!} \\\\\n\\begin{pmatrix}j_1-j_2+j_3 \\\\ n - j_4j_2j_6\\end{pmatrix} = \\dfrac{(j_1-j_2+j_3)!}{(n-j_4j_2j_6)!(j_1j_3j_4j_6-n)!} \\\\\n\\begin{pmatrix}j_2+j_3-j_1 \\\\ n - j_1j_5j_6\\end{pmatrix} = \\dfrac{(j_2+j_3-j_1)!}{(n-j_1j_5j_6)!(j_2j_3j_5j_6-n)!} \\\\\n\\begin{pmatrix}n+1 \\\\ j_1j_2j_3+1\\end{pmatrix} = \\dfrac{(n+1)!}{(n-j_1j_2j_3)(j_1j_2j_3+1)!}.\n$$\n\nSo, we have\n\n$$\n\\begin{Bmatrix}j_1 & j_2 & j_3 \\\\ j_4 & j_5 & j_6\\end{Bmatrix} = \\dfrac{\\Delta(j_4j_5j_3)\\Delta(j_1j_5j_6)\\Delta(j_4j_2j_6)}{\\Delta(j_1j_2j_3)} \\\\\n\\times \\sum\\limits_n (-1)^n \\begin{pmatrix}n+1 \\\\ j_1j_2j_3+1\\end{pmatrix} \\begin{pmatrix}j_1+j_2-j_3 \\\\ n - j_4j_5j_3\\end{pmatrix} \\begin{pmatrix}j_1-j_2+j_3 \\\\ n - j_4j_2j_6\\end{pmatrix} \\begin{pmatrix}j_2+j_3-j_1 \\\\ n - j_1j_5j_6\\end{pmatrix}.\n$$\n\nRewrite $\\Delta(abc)$ with binominals,\n\n$$\n\\Delta(abc) = \\left[\\dfrac{1}{\\begin{pmatrix}a+b+c+1 \\\\ 2a + 1\\end{pmatrix} \\begin{pmatrix}2a \\\\ a + b - c\\end{pmatrix}(2a+1)}\\right]^{\\frac{1}{2}}.\n$$\n\nSo\n\n$$\n\\dfrac{\\Delta(j_4j_5j_3)\\Delta(j_1j_5j_6)\\Delta(j_4j_2j_6)}{\\Delta(j_1j_2j_3)} \\\\\n= \\dfrac{1}{2j_4+1} \\left[\\dfrac{\\begin{pmatrix}j_1j_2j_3+1 \\\\ 2j_1+1\\end{pmatrix}\\begin{pmatrix}2j_1 \\\\ j_1 + j_2 - j_3\\end{pmatrix}}{\\begin{pmatrix}j_1j_5j_6+1 \\\\ 2j_1+1\\end{pmatrix}\\begin{pmatrix}2j_1 \\\\ j_1+j_5-j_6\\end{pmatrix}\\begin{pmatrix}j_4j_5j_3+1\\\\2j_4+1\\end{pmatrix}\\begin{pmatrix}2j_4\\\\j_4+j_5-j_3\\end{pmatrix}\\begin{pmatrix}j_4j_2j_6+1 \\\\ 2j_4+1\\end{pmatrix}\\begin{pmatrix}2j_4 \\\\ j_4+j_2-j_6\\end{pmatrix}}\\right]^{\\frac{1}{2}}\n$$\n\n## 9j symbol\n\nRef[2], P340, Section 10.2.4, Formula (20)\n\n$$\n\\begin{Bmatrix}j_1 & j_2 & j_3 \\\\ j_4 & j_5 & j_6 \\\\ j_7 & j_8 & j_9\\end{Bmatrix} = \\sum\\limits_{t}(-1)^{2t}(2t+1)\\begin{Bmatrix}j_1 & j_2 & j_3 \\\\ j_6 & j_9 & t\\end{Bmatrix} \\begin{Bmatrix}j_4 & j_5 & j_6 \\\\ j_2 & t & j_8\\end{Bmatrix} \\begin{Bmatrix}j_7 & j_8 & j_9 \\\\ t & j_1 & j_4\\end{Bmatrix}\n$$\n\nUse 6j symbol result above, we get\n\n$$\n\\dfrac{\\Delta(j_1j_9t)\\Delta(j_6j_9j_3)\\Delta(j_6j_2t)}{\\Delta(j_1j_2j_3)} \\dfrac{\\Delta(j_4tj_8)\\Delta(j_2tj_6)\\Delta(j_2j_5j_8)}{\\Delta(j_4j_5j_6)} \\dfrac{\\Delta(j_7j_1j_4)\\Delta(tj_1j_9)\\Delta(tj_8j_4)}{\\Delta(j_7j_8j_9)} \\\\\n = \\dfrac{\\Delta(j_3j_6j_9)\\Delta(j_2j_5j_8)\\Delta(j_1j_4j_7)}{\\Delta(j_1j_2j_3)\\Delta(j_4j_5j_6)\\Delta(j_7j_8j_9)} \\Delta^2(j_1j_9t)\\Delta^2(j_2j_6t)\\Delta^2(j_4j_8t).\n$$\n\nDefine $j_{123} \\equiv j_1+j_2+j_3$, and\n\n$$\nP_0 \\equiv \\dfrac{\\Delta(j_3j_6j_9)\\Delta(j_2j_5j_8)\\Delta(j_1j_4j_7)}{\\Delta(j_1j_2j_3)\\Delta(j_4j_5j_6)\\Delta(j_7j_8j_9)} \\\\\n= \\left[\\dfrac{\\begin{pmatrix}j_{123} + 1 \\\\ 2j_1+1\\end{pmatrix}\\begin{pmatrix}2j_1\\\\j_1+j_2-j_3\\end{pmatrix}\\begin{pmatrix}j_{456}+1\\\\2j_5+1\\end{pmatrix}\\begin{pmatrix}2j_5 \\\\ j_4+j_5-j_6\\end{pmatrix}\\begin{pmatrix}j_{789}+1 \\\\ 2j_9+1\\end{pmatrix}\\begin{pmatrix}2j_9 \\\\ j_7 + j_9 - j_8\\end{pmatrix}}{\\begin{pmatrix}j_{147} + 1\\\\ 2j_1 + 1\\end{pmatrix}\\begin{pmatrix}2j_1 \\\\ j_1+j_4-j_7\\end{pmatrix}\\begin{pmatrix}j_{258}+1 \\\\ 2j_5+1\\end{pmatrix}\\begin{pmatrix}2j_5 \\\\ j_2+j_5 - j_8\\end{pmatrix}\\begin{pmatrix}j_{369}+1 \\\\ 2j_9+1\\end{pmatrix}\\begin{pmatrix}2j_9 \\\\ j_3+j_9 - j_6\\end{pmatrix}}\\right]^{1/2}.\n$$\n\nDefine\n\n$$\nP(t) \\equiv (-1)^{2t}(2t+1)\\Delta^2(j_1j_9t)\\Delta^2(j_2j_6t)\\Delta^2(j_4j_8t)  \\\\\n = (-1)^{2t} \\dfrac{1}{\\begin{pmatrix}j_1+j_9+t+1 \\\\ 2t+1\\end{pmatrix}\\begin{pmatrix}2t \\\\ j_1+t-j_9\\end{pmatrix}\\begin{pmatrix}j_2+j_6+t+1 \\\\ 2t+1\\end{pmatrix}\\begin{pmatrix}2t \\\\ j_2+t-j_6\\end{pmatrix}\\begin{pmatrix}j_4+j_8+t \\\\ 2t+1\\end{pmatrix}\\begin{pmatrix}2t \\\\ j_4+t-j_8\\end{pmatrix}(2t+1)^2}.\n$$\n\n$$\nA(t,x) \\equiv (-1)^x\\begin{pmatrix}x+1 \\\\ j_{123} + 1\\end{pmatrix}\\begin{pmatrix}j_1+j_2-j_3 \\\\ x - (j_6+j_9+j_3)\\end{pmatrix} \\begin{pmatrix}j_1+j_3-j_2 \\\\ x - (j_6+j_2+t)\\end{pmatrix}\\begin{pmatrix}j_2+j_3-j_1 \\\\ x - (j_1 + j_9 + t)\\end{pmatrix}.\n$$\n\n$$\nB(t,y) \\equiv (-1)^y\\begin{pmatrix}y+1 \\\\ j_{456} + 1\\end{pmatrix}\\begin{pmatrix}j_4+j_5-j_6 \\\\ y - (j_2+t+j_6)\\end{pmatrix}\\begin{pmatrix}j_4+j_6-j_5 \\\\ y - (j_2+j_5+j_8)\\end{pmatrix}\\begin{pmatrix}j_5+j_6-j_4 \\\\ y - (j_4+t+j_8)\\end{pmatrix}.\n$$\n\n$$\nC(t,z) \\equiv (-1)^z \\begin{pmatrix}z+1 \\\\ j_{789} + 1\\end{pmatrix}\\begin{pmatrix}j_7+j_8-j_9 \\\\ z - (t+j_1+j_9)\\end{pmatrix}\\begin{pmatrix}j_7+j_9-j_8 \\\\ z - (t+j_8+j_4)\\end{pmatrix}\\begin{pmatrix}j_8+j_9- j_7 \\\\ z - (j_7 + j_1 + j_4)\\end{pmatrix}.\n$$\n\nAt last, we get\n\n$$\n\\begin{Bmatrix}j_1 & j_2 & j_3 \\\\ j_4 & j_5 & j_6 \\\\ j_7 & j_8 & j_9\\end{Bmatrix} = P_0\\sum_t P(t) \\left(\\sum_x A(t,x)\\right) \\left(\\sum_y B(t,y)\\right) \\left(\\sum_z C(t,z)\\right)\n$$\n\nIt deserves to be mentioned that, although the formula has 4 $\\sum$, the $\\sum$ of $x,y,z$ are decoupled. So we can do the three `for loop`s respectively, which means the depth of `for loop` is not 4 but 2.\n\n\n----\nReference\n\n1. T. Engeland and M. Hjorth-Jensen, the Oslo-FCI code. [https://github.com/ManyBodyPhysics/CENS](https://github.com/ManyBodyPhysics/CENS).\n2. A. N. Moskalev D. A. Varshalovich and V. K. Khersonskii, *Quantum theory of angular momentum*.\n\n","tags":["math","数学","计算"],"categories":["program","math"]},{"title":"Fortran学习笔记","url":"/2020/02/02/fortran-notes/","content":"\n这个笔记主要来自于彭国伦的《Fortran95程序设计》，保存在有道云笔记。比较懒就不转移到这里，直接放分享链接。\n\n<!-- more-->\n\n## 目录\n1. [基础知识](http://note.youdao.com/noteshare?id=2904f032ee257b38edbc10e4177345d3&sub=73CD4BF8C0FA4241B9EABBDAD79C92EC)\n2. [输入输出基础](http://note.youdao.com/noteshare?id=ce035f46194ed8380019ae1a3dac35a5&sub=D2137E843AB84DD3B8F12BE2DCBC9AAC)\n3. [类型](http://note.youdao.com/noteshare?id=ea020e8810ea9851d8483e2019d1cc30&sub=D9EF5CBFAB304D03A759DC6F7155632E)\n4. [流程控制](http://note.youdao.com/noteshare?id=07f725ef3c6f8bba27060d074f863f14&sub=38490954EE174D0A825346568E6168B2)\n5. [循环](http://note.youdao.com/noteshare?id=1b9a2a3ab1ae3718f412cbc7b8f796db&sub=02DD391048774544884331470D76B283)\n6. [数组](http://note.youdao.com/noteshare?id=794a282315f726d9392b062f14716f62&sub=4883526FB02C41EA98F09A68C5FFFADC)\n7. 函数\n   1. [基础](http://note.youdao.com/noteshare?id=87d757e7640f6b2473c54563fb904d2b&sub=1DD1BFA34C9644E5AF346349F36BA6DC)\n   2. [参数传递](http://note.youdao.com/noteshare?id=c3a1fe07c6cd29d70a82dc6d51f12431&sub=600914E2A2134268B8CA4B3EB5EA7A2F)\n   3. [特殊函数](http://note.youdao.com/noteshare?id=db110c16e9464f7533e2b23edab9ca61&sub=479BE7082D72496685D0F8B8494734F1)\n8. [模块](http://note.youdao.com/noteshare?id=a4b4a7f1bccc66325b8f785c2498dea9&sub=7D593BF76EF94147A77F1EC6422C0B41)\n9. [文件读写](http://note.youdao.com/noteshare?id=c9e54b3d2cd2801b12ab0623f80b05ac&sub=4423FA04DEA44458A94F95305F08EBA6)\n10. [指针](http://note.youdao.com/noteshare?id=b464d0c06a24562c68fe60825e2a3ec9&sub=D2588351C43C4C71A76DDB3F4320D00F)\n11. [面向对象](http://note.youdao.com/noteshare?id=692ee79b6b865e31f873bddcbaa351c9&sub=42C176EC86ED490CAFA3630EB4E2C8FE)\n12. [库函数](http://note.youdao.com/noteshare?id=aa73b4ea6d337db32fd5da912fb3685f&sub=56C80E7E0ED54125A893497255AFE3F2)\n\n最后，再贴一个Fortran写的2048小游戏：[https://github.com/0382/have-fun/tree/master/2048](https://github.com/0382/have-fun/tree/master/2048)","tags":["编程","program","Fortran","笔记"],"categories":["program","Fortran"]},{"title":"关于三维矢量和三维二阶张量的一些运算","url":"/2019/10/16/einstein-notation-simple/","content":"\n使用爱因斯坦求和约定以及 Kronecker delta 记号来推导类似的公式会比较方便.\n\n<!-- more -->\n\n***以下所有的矢量或者张量都是三维的***\n\n***矢量符号或者张量符号就不打了，大写字母表示二阶张量，小写字母表示矢量，希腊字母表示标量***\n\n### 矢量的点乘、叉乘和并矢\n\n- 点乘\n  $$\n  \\phi = a_ib_i\n  $$\n\n- 叉乘\n  $$\n  c_i = \\epsilon_{ijk}a_jb_k\n  $$\n  其中，$\\epsilon_{ijk}$为三阶反对称张量.\n\n- 并矢\n  $$\n  T_{ij} = a_ib_j\n  $$\n\n### 二阶张量和矢量运算\n\n- 张量和矢量点乘\n  $$\n  b_i = A_{ij}a_j\n  $$\n\n- 矢量和张量点乘\n  $$\n  c_i = a_jA_{ji}\n  $$\n\n- 矢量和张量叉乘\n  $$\n  T_{ij} = \\epsilon_{ikl}a_{k}A_{lj}\n  $$\n\n### 二阶矢量的特殊运算\n\n- 点乘（虽然不算什么特殊运算）\n  $$\n  C_{ij} = A_{ik}B_{kj}\n  $$\n  \n- 双点乘\n  $$\n  \\phi = A:B = A_{ij}B_{ji} = trace(AB)\n  $$\n\n- 迹\n  $$\n  trace(A) = A_{ii} = A_{ij}\\delta_{ji} = A:I\n  $$\n\n- 矩阵的行列式（可以看成三个矢量加上反对称张量的缩并，然而并没有什么卵用）\n\n$$\ndet(A) = \\epsilon_{ijk}A_{1i}A_{2j}A_{3k} = \\epsilon_{ijk}A_{i1}A_{j2}A_{k3}\n$$\n\n### 梯度，散度，旋度，nabla 算子与矢量的并矢\n\n- $\\nabla$算子\n  $$\n  \\nabla = \\dfrac{\\partial}{\\partial x}\\vec{e_x} + \\dfrac{\\partial}{\\partial y}\\vec{e_y} + \\dfrac{\\partial}{\\partial z} \\vec{e_z}\n  $$\n  这是可以看成一个矢量的，也可以写成\n  $$\n  \\nabla_i = \\partial_i = \\dfrac{\\partial}{\\partial x_i}\n  $$\n\n- 矢量的散度\n$$\n\\phi = \\nabla\\cdot\\vec{a} =  \\partial_i a_i\n$$\n\n- 标量的梯度\n  $$\n  a_i = \\partial_i \\phi\n  $$\n\n- $\\nabla$算子与矢量的并矢其实就矢量的梯度，形成二阶张量\n  $$\n  T_{ij} = \\nabla\\vec{a} = \\partial_i a_j\n  $$\n\n- 矢量的旋度\n  $$\n  b_i = \\nabla\\times\\vec{a} = \\epsilon_{ijk}\\partial_ja_k\n  $$\n\n- 并矢的散度\n  $$\n  \\nabla\\cdot(\\vec{a}\\vec{b}) = \\partial_i(a_ib_j) = (\\partial_ia_i)b_j + a_i(\\partial_ib_j) = (\\nabla\\cdot\\vec{a})\\vec{b} + \\vec{a}\\cdot\\nabla\\vec{b}\n  $$\n\n- 并矢的旋度\n  $$\n  \\nabla\\times(\\vec{a}\\vec{b}) = \\epsilon_{ijk}\\partial_j(a_kb_l) = \\epsilon_{ijk}(\\partial_ja_k)b_l+\\epsilon_{ijk}a_k(\\partial_kb_l) = (\\nabla\\times\\vec{a})\\vec{b} + \\vec{a}\\times(\\nabla\\vec{b})\n  $$\n\n### 一些公式\n\n- $\\nabla$算子的二阶作用\n\n$$\n\\begin{aligned}\n\\nabla^2\\phi &= (\\nabla\\cdot\\nabla)\\phi \\\\\n\\nabla\\times(\\nabla\\times\\vec{a}) &= \\nabla(\\nabla\\cdot\\vec{a}) - \\nabla^2\\vec{a} \\\\\n\\nabla\\times\\nabla\\phi &= 0 \\\\\n\\nabla\\cdot(\\nabla\\times\\vec{a}) &= 0\n\\end{aligned}\n$$\n\n以其中第二个式子的证明为例\n$$\n\\begin{aligned}\n\\nabla\\times(\\nabla\\times\\vec{a}) &= \\epsilon_{ijk}\\partial_j(\\epsilon_{klm}\\partial_la_m)  \\\\\n&= \\epsilon_{ijk}\\epsilon_{klm}\\partial_j\\partial_la_m  \\\\\n&= (\\delta_{il}\\delta_{jm}-\\delta_{im}\\delta_{jl})\\partial_j\\partial_la_m \\\\\n&= \\partial_i(\\partial_ja_j) - \\partial_j\\partial_ja_i \\\\\n&= \\nabla(\\nabla\\cdot\\vec{a})-\\nabla^2\\vec{a}\n\\end{aligned}\n$$\n\n### Kronecker delta\n\n要完成以上的推导，你还需要一些关于 delta 函数的一些知识\n$$\n\\epsilon_{ijk}\\epsilon^{lmn} =\\left(\n\\begin{matrix}\n    \\delta_{i}^{l} & \\delta_{i}^{m} & \\delta_{i}^{n} \\\\\n    \\delta_{j}^{l} & \\delta_{j}^{m} & \\delta_{j}^{n} \\\\\n    \\delta_{k}^{l} & \\delta_{j}^{m} & \\delta_{k}^{n}\n\\end{matrix}\\right)\n$$\n$$\n\\begin{aligned}\n& \\epsilon_{ijk}\\epsilon^{imn} = \\delta_j^m\\delta_k^n - \\delta_j^n\\delta_k^m \\\\\n& \\epsilon_{jmn}\\epsilon^{imn} = 2\\delta_j^i \\\\\n& \\epsilon_{ijk}\\epsilon^{ijk} = 6\n\\end{aligned}\n$$","tags":["math","数学","爱因斯坦求和约定"],"categories":["math","数学基础"]},{"title":"高斯单位制（其三）","url":"/2019/10/16/gauss-unit-3/","content":"\n这一节开始推导一下高斯单位制下，静电场和静磁场的相关公式。\n\n<!-- more -->\n\n## 静电场\n\n静电场的出发点自然式麦克斯韦方程组关于电场的两个，因为是静电场，所以磁场变化项就为零了：\n$$\n\\begin{aligned}\n\\nabla\\cdot\\vec{D} &= 4\\pi\\rho_f \\\\\n\\nabla \\times \\vec{E} &= 0 \\\\\n\\vec{D}& = \\epsilon\\vec{E}\n\\end{aligned}\n$$\n根据$\\nabla\\times \\vec{E} = 0$，静电场下可以定义电势\n$$\n\\psi(\\vec{r}_2) - \\psi(\\vec{r}_1) = -\\int_{\\vec{r}_1}^{\\vec{r}_2}\\vec{E}\\cdot d\\vec{l}\n$$\n自然，很容易得到\n$$\n\\vec{E} = -\\nabla \\psi\n$$\n通过点电荷电势，可以推出一般的电势公式\n$$\n\\psi(\\vec{r}) = \\int\\dfrac{\\rho(\\vec{r}')dV'}{|\\vec{r}-\\vec{r}'|}\n$$\n再根据$\\nabla\\cdot\\vec{D}=4\\pi\\rho_f,\\vec{D}=\\epsilon\\vec{E}$，于是有静电场的泊松方程\n$$\n\\nabla^2\\psi = -\\dfrac{4\\pi}{\\epsilon}\\rho_f\n$$\n\n### 电偶极子\n\n定义和SI制一样，$\\vec{p} = q(\\vec{r}_+-\\vec{r}_-)$或者一般式\n$$\n\\vec{p} = \\int \\rho \\vec{r} dV\n$$\n远场的偶极子电势\n$$\n\\psi = \\dfrac{\\vec{p}\\cdot\\vec{r}}{r^3}\n$$\n偶极子受力为，\n$$\n\\vec{F} = -\\nabla U = \\nabla (\\vec{p}\\cdot \\vec{E}_{\\text{外}})  = \\vec{p}\\cdot\\nabla\\vec{E}_{\\text{外}}\n$$\n受到的力矩为\n$$\n\\vec{N} = \\vec{p}\\times\\vec{E}\n$$\n这些都和SI制差不太多，至于电四极矩之类的，应该也很好推导。\n\n## 静磁场\n\n静磁场出发点也是麦克斯韦方程组\n$$\n\\begin{aligned}\n\\nabla \\cdot \\vec{B} &= 0 \\\\\n\\nabla \\times \\vec{H} &= \\dfrac{4\\pi}{c} \\vec{j}_f \\\\\n\\vec{B} &= \\mu\\vec{H}\n\\end{aligned}\n$$\n不过，磁场还要引入一个磁矢势$\\vec{A}$，使得$\\vec{B} =\\nabla\\times\\vec{A}$. 一般来说，这里还是采取库伦规范条件$\\nabla\\cdot\\vec{A}$，于是有\n$$\n\\nabla\\times\\vec{B} = \\nabla\\times(\\nabla\\times\\vec{A}) = \\nabla(\\nabla\\cdot\\vec{A})-\\nabla^2\\vec{A} = -\\nabla^2\\vec{A}=\\dfrac{4\\pi}{c}\\mu\\vec{j}\n$$\n即关于磁矢势的泊松方程\n$$\n\\nabla^2\\vec{A} = -\\dfrac{4\\pi}{c}\\mu\\vec{j}\n$$\n一般的，磁矢势表达式为\n$$\n\\vec{A} = \\dfrac{\\mu}{c}\\int\\dfrac{\\vec{j}(\\vec{r}')}{|\\vec{r}-\\vec{r}'|}dV'\n$$\n\n### 磁偶极子\n\n高斯单位制下，电场公式似乎都比较熟悉，磁场公式则需要小心光速$c$. 所以这里仔细推导一下磁偶极子的定义，我们知道，电偶极子是电场的多级展开的第二项。自然，磁偶极子也是磁场的多级展开的一项。首先，根据\n$$\n\\dfrac{1}{|\\vec{r}-\\vec{r}'|} = \\dfrac{1}{r} + \\dfrac{\\vec{r}\\cdot\\vec{r}'}{r^3} + \\cdots\n$$\n将磁矢势的一般表达式展开\n$$\n\\vec{A} = \\dfrac{\\mu}{c}\\dfrac{1}{r}\\int_V\\vec{j}(\\vec{r}')dV' + \\dfrac{\\mu}{c}\\dfrac{1}{r^3}\\vec{r}\\cdot\\int_V \\vec{r}'\\vec{j}'dV' + \\cdots\n$$\n上式的意义是，设有一个具有电流的导体，其尺度为$V$，求其在很远的$\\vec{r}$处产生的磁矢势。而第一项积分体积内没有电流的流入或者流出，所以一定为零。第二项就是我们磁偶极子，首先证明一个式子\n$$\n\\int_V (\\vec{r}'\\vec{j}+\\vec{j}\\vec{r}')d V' = 0\n$$\n这是因为\n$$\n\\begin{aligned}\n\\nabla'\\cdot(\\vec{j}\\vec{r}'\\vec{r}') &= (\\nabla'\\cdot\\vec{j})\\vec{r}'\\vec{r}' + \\vec{j}\\cdot(\\nabla'\\vec{r}')\\vec{r}' + \\vec{r}'\\vec{j}\\cdot(\\nabla'\\vec{r}') \\\\\n& = \\vec{j}\\vec{r}'+\\vec{r}'\\vec{j}\n\\end{aligned}\n$$\n体积分可以化为边界上的积分，而边界上的电流为零，所以积分为零。于是磁偶极子项可以写成\n$$\n\\vec{A} = \\dfrac{\\mu}{c}\\dfrac{1}{2r^3}\\vec{r}\\cdot\\int_V(\\vec{r}'\\vec{j}-\\vec{j}\\vec{r}') dV' = -\\dfrac{\\mu}{c}\\dfrac{1}{2r^3}\\vec{r}\\times\\int_V(\\vec{r}'\\times\\vec{j})dV'\n$$\n定义磁偶极子\n$$\n\\vec{m} = \\dfrac{1}{2c}\\int_V\\vec{r}'\\times\\vec{j}dV'\n$$\n于是\n$$\n\\vec{A} = \\mu\\dfrac{\\vec{m}\\times\\vec{r}}{r^3}\n$$\n就和电偶极子的公式比较像了。对于线圈，有$\\vec{m} = \\dfrac{1}{2c}\\int\\vec{r}'\\times\\vec{j}dV'=\\dfrac{I}{2c}\\oint\\vec{r}'\\times d\\vec{l}'$，对于任意的平面线圈，有$\\vec{S} = \\dfrac{1}{2}\\oint\\vec{r}\\times d\\vec{l}$，所以，有\n$$\n\\vec{m} = \\dfrac{1}{c}I\\vec{S}\n$$\n这样定义的磁偶极子，除了能够消除磁偶极子的磁矢势中的$c$，还使得磁偶极子的在磁场的受力公式更加简洁。\n\n来看看受力，高斯单位制中，洛伦兹力为$\\vec{F} = \\dfrac{1}{c}\\vec{v}\\times\\vec{B}$，一般式为\n$$\n\\vec{F} = \\dfrac{1}{c}\\int_V\\vec{j}(\\vec{r})\\times\\vec{B}(\\vec{r})dV\n$$\n于是，将磁场在原点展开$\\vec{B}(\\vec{r}) = \\vec{B}_0 + \\vec{r}\\cdot\\nabla\\vec{B}_0+\\cdots$，前面已经提到，电流密度的体积分为零，所以展开式第一项积分为零，第二项是磁偶极子受力项\n$$\n\\vec{F} = \\dfrac{1}{c}\\int_V\\vec{j}\\times(\\vec{r}\\cdot\\nabla\\vec{B}_0)dV = \\dfrac{1}{c}(\\int_V\\vec{j}\\vec{r}dV\\cdot \\nabla)\\times\\vec{B}_0\n$$\n前面已经知道$\\int\\vec{j}\\vec{r}dV = \\int(\\vec{j}\\vec{r}-\\vec{r}\\vec{j})dV$，而$(\\vec{j}\\vec{r}-\\vec{r}\\vec{j})\\cdot \\nabla = (\\vec{r}\\times\\vec{j})\\times \\nabla$，所以\n$$\n\\vec{F} = (\\vec{m}\\times\\nabla)\\times\\vec{B}_0 = \\nabla(\\vec{m}\\cdot\\vec{B}_0)-\\vec{m}(\\nabla\\cdot\\vec{B}_0)\n$$\n后一项为零，所以磁偶极子受力公式为\n$$\n\\vec{F} = \\nabla(\\vec{m}\\cdot\\vec{B})\n$$\n这个公式看上去和SI制是一致的，并且与电偶极子的受力公式也是一致的。磁偶极子受到的力矩请自行推导\n$$\n\\vec{N} = \\int_V\\vec{r}\\times (\\dfrac{1}{c}\\vec{j}\\times\\vec{B}_0)dV = \\vec{m}\\times\\vec{B}\n$$\n因此，高斯单位制下，磁偶极矩的定义，别忘了分母上还有一个$c$.\n\n--------------\n- 参考自郑大师电磁学讲义","tags":["physics","物理","高斯单位制","电磁学"],"categories":["physics","高斯单位制"]},{"title":"高斯单位制（其二）","url":"/2019/10/16/gauss-unit-2/","content":"\n我写这个系列文章的目的一来是为了搞清楚高斯单位制，而来也是打算复习一下经典电磁学。所以之后的一系列文章都会是在高斯单位制下所做的一系列推导。高斯单位制的定义，在第一篇已经明确了。之后的公式，默认都是在高斯单位制下的，但是对于理解高斯单位制，或许意义不大。本节主要内容是麦克斯韦方程组。\n\n<!-- more -->\n\n## 麦克斯韦方程组\n\n上一篇文章已经求出了静电场和静磁场的方程\n$$\n\\begin{aligned}\n\\nabla \\cdot \\vec{E} &= 4\\pi \\rho \\\\\n\\nabla \\times \\vec{E} &= 0 \\\\\n\\nabla \\cdot \\vec{B} &= 0 \\\\\n\\nabla \\times \\vec{B} &= \\dfrac{4\\pi}{c} \\vec{j} \\\\\n\\end{aligned}\n$$\n对于真空电磁场理论来说，还差一个电与磁之间的相互感应。首先是法拉第电磁感应定律：任意闭合回路上产生的电动势等于此闭合回路围成的曲面上的的磁通量的变化率。不过，比起国际单位制的公式\n$$\n\\oint_L\\vec{E}d\\vec{l} = -\\dfrac{d}{dt}\\int_S\\vec{B}\\cdot d\\vec{S} \\qquad // \\text{SI制}\n$$\n我们知道高斯单位制下，电场和磁场量纲是一样的，所以上式还差一个速度量纲，在高斯单位制下，电磁感应定律应该写成\n$$\n\\oint_L\\vec{E}d\\vec{L} = -\\dfrac{d}{cdt}\\int_S\\vec{B}\\cdot d\\vec{S}\n$$\n因为电磁感应定律本来就是实验定律，所以也不存在怎么推导出来的。总之，上式是正确的。微分形式\n$$\n\\nabla \\times \\vec{E} = -\\dfrac{1}{c}\\dfrac{\\partial \\vec{B}}{\\partial t}\n$$\n然后是麦克斯韦对于电场变化感应出磁场推测，参考我老师自己的讲义，这样理解：对于非静磁场，$\\nabla \\times \\vec{j} = -\\dfrac{\\partial \\rho}{\\partial t} \\neq 0$，然而根据$\\nabla\\times \\vec{B} = \\dfrac{4\\pi}{c}\\vec{j}$，有$\\nabla \\cdot \\vec{j}=0$，所以可以做一个修改\n$$\n\\nabla\\times \\vec{B} = \\dfrac{4\\pi}{c}(\\vec{j} + \\vec{j}_D)\n$$\n其中$\\vec{j}_D$称为位移电流，于是\n$$\n\\nabla \\cdot (\\vec{j} + \\vec{j}_D) = 0\n$$\n另一方面，根据电荷守恒$\\nabla \\cdot j = -\\dfrac{\\partial \\rho}{\\partial t}$，以及$\\nabla \\cdot \\vec{E} = 4\\pi \\rho$，于是有\n$$\n\\nabla \\cdot (\\vec{j}_D-\\dfrac{1}{4\\pi}\\dfrac{\\partial\\vec{E}}{\\partial t}) = 0\n$$\n猜测（虽然是猜测，只要实验验证过得去就行了）\n$$\n\\vec{j}_D = \\dfrac{1}{4\\pi} \\dfrac{\\partial\\vec{E}}{\\partial t}\n$$\n于是磁感应强度的散度变为\n$$\n\\nabla \\times \\vec{B} = \\dfrac{4\\pi}{c}\\vec{j} + \\dfrac{1}{c}\\dfrac{\\partial\\vec{E}}{\\partial t}\n$$\n现在，真空电磁场的麦克斯韦方程组搞定了\n$$\n\\begin{aligned}\n\\nabla\\cdot\\vec{E} &= 4\\pi \\rho \\\\\n\\nabla\\times\\vec{E} &= -\\dfrac{1}{c}\\dfrac{\\partial\\vec{B}}{\\partial t} \\\\\n\\nabla\\cdot\\vec{B} &= 0 \\\\\n\\nabla\\times\\vec{B} &= \\dfrac{4\\pi}{c}\\vec{j} + \\dfrac{1}{c}\\dfrac{\\partial \\vec{B}}{\\partial t}\n\\end{aligned}\n$$\n最后，在加上洛伦兹力公式，就可以做动力学了，这也是一个实验公式\n$$\n\\vec{F} = q(\\vec{E} + \\dfrac{1}{c}\\vec{v}\\times\\vec{E})\n$$\n当然，至少量纲是对的。\n\n## 介质的电磁性质\n\n真空之后，就是介质的电磁学了。\n\n### 介质极化\n\n介质分子在各种作用下，具有电偶极矩$\\vec{p}_i$，定义极化强度\n$$\n\\vec{P} = \\dfrac{\\sum_i\\vec{p}_i}{\\Delta V}\n$$\n极化强度和束缚电荷密度$\\rho_p$有如下关系：\n$$\n\\rho_p = -\\nabla\\cdot\\vec{P},\\quad \\text{或积分形式}\\quad \\int_V\\rho_pdV = -\\oint_S\\vec{P}\\cdot d\\vec{S}\n$$\n这是因为，对于一个闭合曲面，$\\vec{P}\\cdot d\\vec{S} = \\rho_p \\vec{l} \\cdot d\\vec{S}$可以看成偶极子部分伸出这个闭合曲面带来的电量损失，根据电荷守恒，就有了这个式子。\n\n设自由电荷密度为$\\rho_f$，那么电场散度\n$$\n\\nabla\\cdot\\vec{E} = 4\\pi (\\rho_f+\\rho_p)\n$$\n定义电位移矢量\n$$\n\\vec{D} = \\vec{E} + 4\\pi \\vec{P}\n$$\n根据$\\rho_p$和$\\vec{P}$的关系代入，则有\n$$\n\\nabla \\cdot \\vec{D} = 4\\pi\\rho_f\n$$\n定义介质极化率$\\chi_e$\n$$\n\\vec{P} = \\chi_e\\vec{E}\n$$\n以及介电函数$\\epsilon$\n$$\n\\vec{D} = \\epsilon\\vec{E}\n$$\n于是有\n$$\n\\epsilon = 1 + 4\\pi\\chi_e\n$$\n(这个极化率总觉得怪怪的，还是SI制的极化率看上去舒服一点。)\n\n### 介质磁化\n\n同样，在各种作用下，介质分子具有磁矩$\\vec{m}_i=\\dfrac{1}{c}i\\vec{a}$，这里的磁矩定义和SI制不同，但是是严格的，具体是如何定义的，还请看之后关于磁场作用力的文章，如果我能写到那里的话。定义磁化强度\n$$\n\\vec{M} = \\dfrac{\\sum_i\\vec{m}_i}{\\Delta V}\n$$\n这些分子分子电流在宏观上形成剩余电流，称为磁化电流。磁化电流密度$\\vec{j}_M$与磁化强度$\\vec{M}$有关系\n$$\nI_M =  \\int_S \\vec{j}_M\\cdot d\\vec{S} = \\oint_L c\\vec{M} \\cdot d\\vec{l}\n$$\n这是因为，可以考虑曲面$S$，计算通过的磁化电流$I_M$，另一方面，磁化强度可以看成一些分子电流小线圈$c\\vec{M} = ni\\vec{a}$，只有挂在曲面边界上的线圈才对总电流有贡献。微分形式是\n$$\n\\nabla\\times\\vec{M} = \\dfrac{1}{c}\\vec{j}_M\n$$\n此外，除了磁化电流，介质中还有极化电荷随时间变化产生的极化电流密度$\\vec{j}_p$\n$$\n\\vec{P} = \\dfrac{\\sum_i e_i\\vec{r}_i}{\\Delta V},\\qquad \\vec{j}_p = \\dfrac{\\sum_ie_i\\dot{\\vec{r}}_i}{\\Delta V} = \\dfrac{\\partial \\vec{P}}{\\partial t}\n$$\n于是磁场的散度方程变为\n$$\n\\nabla\\times\\vec{B} = \\dfrac{4\\pi}{c}(\\vec{j}_f+\\vec{j}_M+\\vec{j}_p) + \\dfrac{1}{c}\\dfrac{\\partial \\vec{B}}{\\partial t}\n$$\n定义磁场强度\n$$\n\\vec{H} = \\vec{B}-4\\pi\\vec{M}\n$$\n于是有\n$$\n\\nabla\\times\\vec{H} = \\dfrac{4\\pi}{c}\\vec{j}_f + \\dfrac{1}{c}\\dfrac{\\partial \\vec{D}}{\\partial t}\n$$\n定义磁化率$\\chi_m$\n$$\n\\vec{M} = \\chi_m\\vec{H}\n$$\n磁导率$\\mu$\n$$\n\\vec{B} = \\mu\\vec{H}\n$$\n于是有\n$$\n\\mu = 1 + 4\\pi\\chi_m\n$$\n综上所述，介质中的麦克斯韦方程组为\n$$\n\\begin{aligned}\n\\nabla\\cdot\\vec{D} &= 4\\pi\\rho_f \\\\\n\\nabla\\times\\vec{E} &= -\\dfrac{1}{c}\\dfrac{\\partial \\vec{B}}{\\partial t} \\\\\n\\nabla\\cdot\\vec{B} &= 0 \\\\\n\\nabla\\times\\vec{H} &= \\dfrac{4\\pi}{c}\\vec{j}_f + \\dfrac{1}{c}\\dfrac{\\partial \\vec{D}}{\\partial t}\n\\end{aligned}\n$$\n\n以及一些关系\n$$\n\\begin{aligned}\n&\\vec{D} = \\epsilon \\vec{E} \\\\\n&\\vec{P} = \\chi_e \\vec{E} \\\\\n&\\epsilon = 1 + 4\\pi \\chi_e \\\\\n&\\vec{B} = \\mu \\vec{H} \\\\\n&\\vec{M} = \\chi_m \\vec{H} \\\\\n&\\mu = 1 + 4\\pi\\chi_m\n&\\end{aligned}\n$$\n\n-----------\n- 参考自郑大师电磁学讲义","tags":["physics","物理","高斯单位制","电磁学"],"categories":["physics","高斯单位制"]},{"title":"高斯单位制（其一）","url":"/2019/10/15/gauss-unit-1/","content":"\n高斯单位制是一个比较古老的单位制，但是在物理学研究中的很多领域还有很大的用处.不过本文不是用来对比高斯单位制和国际单位制的，而是从高斯单位制出发，推导一下电动力学的相关公式.本节主要是电磁学一些基本物理量的定义公式，高斯单位制下和高中学的有较大的区别.\n\n<!-- more -->\n\n## 厘米-克-秒制（CGS制）\n\ncentimeter-gram-second system以下都简称CGS制。在力学单位上，CGS是一致的，但是在电学单位上有几种变种。本文对此并不感兴趣，只考虑其中之一的高斯单位制。\n\n### 厘米-克-秒制一些导出单位\n摘抄自[wiki](https://zh.wikipedia.org/wiki/%E5%8E%98%E7%B1%B3-%E5%85%8B-%E7%A7%92%E5%88%B6)\n\n|物理量|符号|单位|定义|SI单位制|\n|----|----|---|:---|:------|\n| 速度 | $v$ | 厘米/秒(cm/s) | 1 cm/s | =  10^-2^米/秒 |\n| 加速度 | $a$ | 伽(gal) | 1 cm/s^2^ | = 10^-2^米/秒 |\n| 力 | $F$ | 达因(dyne) | 1 dyn = 1 g$\\cdot$cm^2^/s^2^ | = 10^-5^牛顿(N) |\n| 能量 | $E$ | 尔格(erg) | 1 erg = 1 g$\\cdot$cm^2^/s^2^ | = 10^-7^焦耳(J) |\n| 功率 | $P$ | 尔格/秒(erg/s) | 1 erg/s = 1 g$\\cdot$cm^2^/s^3^ | = 10^-7^瓦特(W) |\n| 压力 | $p$ | 巴(Bar) | 1 Bar = 10^6^dyn/cm^2^=10^6^g/(cm$\\cdot$s^2^) | = 10^-5^帕(Pa) |\n| 粘度 | $\\mu$ | 泊(P) | 1 P = 1 g/(cm$\\cdot$s) | = 10^-1^帕-秒(Pa$\\cdot$s) |\n| 动粘度 | $v$ | 斯托克(St) | 1 St = 1 cm^2^/s | = 10^-4^米/秒 |\n| 波数 | $k$ | 凯塞(kayser) | 1 kayser = cm^-1^ | = 100 米^-1^ |\n\n## 高斯单位制\n\n### 电荷的单位\n\n在高斯单位制里，直接定义库伦定律为\n$$\nF = \\dfrac{Q_1 Q_2}{r^2}\n$$\n高斯单位制源于CGS制，因此上式中，力的单位为达因(dyne)，距离的单位为厘米。现在定义电荷的单位为statC，可以写成力学单位的组合\n$$\n1 \\mathrm{statC} = 1 g^{1/2}cm^{3/2}s^{-1}\n$$\n\n### 静电场\n\n接下来是一些基本电磁学单位的推导。有了电荷，就可以定义电流和电压了。电流的方程还是一样$I = \\Delta Q/\\Delta t$，单位是 $\\mathrm{statC/s^{-1}}$. 电压（电势）则是根据库伦定律\n$$\n\\phi = \\dfrac{Q}{r}\n$$\n电势的单位名称为 statV，1 statV = 1 statC/cm.\n\n接下来是电场强度，库伦定律形式不变\n$$\nE = \\dfrac{Q}{r^2}\n$$\n于是电场单位为 statV/cm. 现在就可以搞静电学了。首先是静电场的高斯定律\n$$\n\\oint \\vec{E} \\cdot d\\vec{S} = 4\\pi\\sum Q_i = 4\\pi\\int_V \\rho dV.\n$$\n这里开始有$4\\pi$了，请回想一下高斯定理的推导，这个还是很容易的。微分形式就是\n$$\n\\nabla \\cdot \\vec{E} = 4\\pi \\rho\n$$\n当然，静电场旋度为零这个关系还是成立的\n$$\n\\nabla\\times \\vec{E} = 0\n$$\n在CGS制里，这里的电荷密度单位当然就是 $\\mathrm{statC/cm^3}$. 顺带一提，电荷守恒定律为\n$$\n\\dfrac{\\partial \\rho}{\\partial t} + \\nabla \\vec{j} = 0\n$$\n电流密度矢量的单位，自不必多言。\n\n你也可以试着推导一下电阻，电容之类的，不过本文的目的还是为了确定电磁场公式，这些就不全部给出了。\n\n### 静磁场\n\n对于静磁场，其出发点是毕奥-萨伐尔定律\n$$\nd\\vec{F} = k_m\\dfrac{I_1 I_2 d\\vec{l}_2 \\times (d\\vec{l}_1\\times \\vec{r}_{12})}{r^3_{12}}\n$$\n不过，前面定义了电荷，电流，长度量纲也是已定义的，所以上式中的常数$k_m$是无法定义为1的。不过，实际上我们知道，在国际单位制中，通过麦克斯韦方程组解出，静电常量$k_e$和静磁常量$k_m$的关系是\n$$\n\\dfrac{k_e}{k_m} = c^2\n$$\n光速是自然界的常数，自然在任何单位制下都是成立的的。因此，$k_m$的值为\n$$\nk_m = \\dfrac{1}{c^2}\n$$\n这么说有点像拿未知的推导已知的，不过我们当然可以先不求出$k_m$的值，直接推导出麦克斯韦方程组，然后再确定$k_m$的值。或者我们也可以直接重新定义$k_m$为式$1/c^2$，并且把$c$看成一个未知的常数，之后再确定$c$。总之，最终目的是得到没有歧义的高斯单位制下的电磁场方程。不管怎样，高斯单位制下$c$具有速度的量纲。\n\n对于毕奥-萨伐尔定律，可以拆解为两部分：安培力公式\n$$\nd\\vec{F} = I d\\vec{l}\\times \\dfrac{1}{c} \\vec{B}\n$$\n和电流元产生的磁感应强度公式\n$$\nd\\vec{B} = \\dfrac{1}{c} \\dfrac{I d\\vec{l}\\times \\vec{r}}{r^3}\n$$\n在这个拆解下，磁感应强度具有和电场强度相同的量纲。不过还是另外定义了磁感应强度的单位为 gauss，并且有关系 $\\mathrm{gauss} = \\mathrm{statV/cm} = \\mathrm{cm^{-1}/2g^{1/2}s^{-1}}$，但是 1 gauss 并不等于 1 statV/cm，因为磁感应强度显然不能等于电场强度。(所以说还是国际单位制清晰明了。)\n\n虽然历史上 1gauss 的定义最初是在电磁单位制下的，不过，在高斯单位制下，1gauss 可以定义为：电流元磁感应强度公式，电流为$I$无限长直导线在距离为$a$处产生的磁感应强度大小为\n$$\nB = \\dfrac{2I}{c a}\n$$\n如果$I = 29979245800\\mathrm{statC/s}, a = 1\\mathrm{cm}$，(注意光速应该为CGS单位制，也就是$c = 29979245800\\mathrm{cm/s}$)，则有$B = 2\\mathrm{gauss}$，并且有$1 \\mathrm{gauss} = 10^{-4}T$.\n\n现在我们可以做静磁学了，根据电流元磁感应强度公式，导线产生的磁感应强度为\n$$\n\\vec{B}(\\vec{r}) = \\dfrac{1}{c}\\int_L \\dfrac{I d\\vec{l}\\times (\\vec{r}-\\vec{r}')}{|\\vec{r}-\\vec{r}'|^3}\n$$\n对于具有体积的导体，则应该是\n$$\n\\vec{B}(\\vec{r}) = \\dfrac{1}{c}\\int_V\\dfrac{\\vec{j}(\\vec{r}')\\times(\\vec{r}-\\vec{r}')}{|\\vec{r}-\\vec{r}'|^3}dV'\n$$\n于是磁矢势就是(根据$\\vec{B} = \\nabla \\times \\vec{A}$的关系)\n$$\n\\vec{A}(\\vec{r}) = \\frac{1}{c}\\int_V\\dfrac{\\vec{j}(\\vec{r}')}{|\\vec{r}-\\vec{r}'|}dV'\n$$\n\n对上式作用$\\nabla$，可以证明\n$$\n\\nabla \\cdot \\vec{A} = 0 \\qquad \\nabla^2\\vec{A} = -\\dfrac{4\\pi}{c}\\vec{j}\n$$\n从而可以得到\n$$\n\\nabla \\times \\vec{B} = \\dfrac{4\\pi}{c} \\vec{j}\n$$\n由$\\vec{B} = \\nabla \\times \\vec{A}$可得\n$$\n\\nabla \\cdot \\vec{B} = 0\n$$\n\n--------\n- 参考自郑大师电磁学讲义","tags":["physics","物理","高斯单位制","电磁学"],"categories":["physics","高斯单位制"]},{"title":"nabla算子","url":"/2019/10/06/nabla/","content":"\n## 基础\n\n$$\\nabla = \\vec{e_x}\\frac{\\partial}{\\partial x} + \\vec{e_y}\\frac{\\partial}{\\partial y} + \\vec{e_z}\\frac{\\partial}{\\partial z}$$\n$$\\nabla \\cdot \\vec{f} \\equiv div \\vec{f}$$\n$$\\nabla \\times \\vec{f} \\equiv rot \\vec{f}$$\n$$\\nabla \\phi \\equiv grad \\phi$$\n\n<!-- more -->\n\n### 积分公式\n\n- Gauss积分公式\n\n$$\\oint_S \\vec{f}\\cdot d\\vec{S} = \\int_V \\nabla \\vec{f} dV$$\n\n- Stokes定理\n\n$$\\oint_L \\vec{f}\\cdot d\\vec{l} = \\int_S(\\nabla \\times \\vec{f})\\cdot d\\vec{S}$$\n\n- Green公式\n \n$$\\oint \\psi \\nabla \\phi \\cdot d\\vec{S} = \\int_V(\\psi\\nabla^2\\phi+\\nabla\\psi\\cdot\\nabla\\phi)dV$$\n$$\\oint(\\psi\\nabla\\phi-\\phi\\nabla\\psi)\\cdot d\\vec{S}=\\int_V(\\psi\\nabla^2\\phi-\\phi\\nabla^2\\psi)dV$$\n\n- 亥姆霍兹定理：<q>任意矢量可以分解成无源场和无旋场之和</q>\n\n$$\\vec{f} = \\nabla\\phi+\\nabla\\times\\vec{A}$$\n\n## 常用公式\n\n$$\n\\begin{aligned}\n&\\nabla^2\\phi=(\\nabla\\cdot\\nabla)\\psi \\\\\n&\\nabla^2\\vec{f}=\\nabla(\\nabla\\cdot\\vec{f})-\\nabla\\times(\\nabla\\times\\vec{f}) \\\\\n&\\nabla\\times\\nabla\\phi=0, \\quad \\nabla\\cdot(\\nabla\\times\\vec{f}) \\\\\n&\\nabla(\\phi\\psi) = \\phi\\nabla\\psi + \\psi\\nabla\\phi \\\\\n&\\nabla(\\vec{f}\\cdot\\vec{g})=\\vec{f}\\times(\\nabla\\times\\vec{g})+\\vec{g}\\times(\\nabla\\times\\vec{f})+(\\vec{f}\\cdot\\nabla)\\vec{g}+(\\vec{g}\\cdot\\nabla)\\vec{f} \\\\\n&\\nabla\\cdot(\\phi\\vec{f}) = \\phi(\\nabla\\cdot\\vec{f})+\\vec{f}\\cdot(\\nabla\\phi) \\\\\n&\\nabla\\cdot(\\vec{f}\\times\\vec{g}) = \\vec{g}\\cdot(\\nabla\\times\\vec{f})-\\vec{f}\\cdot(\\nabla\\times\\vec{g}) \\\\\n&\\nabla\\times(\\phi\\vec{f})=\\phi(\\nabla\\times\\vec{f})-\\vec{f}\\times(\\nabla\\phi) \\\\\n&\\nabla\\times(\\vec{f}\\times\\vec{g}) = (\\vec{g}\\cdot\\nabla)\\vec{f}-(\\vec{f}\\cdot\\nabla)\\vec{g}+\\vec{f}(\\nabla\\cdot\\vec{g})-\\vec{g}(\\nabla\\cdot\\vec{f}).\n\\end{aligned}\n$$\n\n### 对一些简单函数的作用\n\n$$\n\\begin{aligned}\n&\\nabla\\cdot\\vec{r}=3, \\quad \\nabla r = \\frac{\\vec{r}}{r}, \\quad \\nabla\\times\\vec{r} = 0, \\\\\n&\\nabla\\frac{1}{r} = -\\frac{\\vec{r}}{r^3}, \\quad \\nabla f(r)=f(r')\\frac{\\vec{r}}{r}, \\quad \\nabla^2\\frac{1}{r} = -4\\pi\\delta(\\vec{r}) \\\\\n&\\nabla\\times(f(r)\\vec{r})=0, \\quad \\nabla\\vec{r}=\\overleftrightarrow{I} \\\\\n&\\nabla(\\vec{a}\\cdot\\vec{r})=(\\vec{a}\\cdot\\nabla)\\vec{r}=\\vec{a}, \\quad \\nabla e^{i\\vec{a}\\cdot\\vec{r}}=i\\vec{a}\\vec{r}e^{i\\vec{a}\\cdot\\vec{r}}.\n\\end{aligned}\n$$\n\n### 球坐标\n\n$$\n\\begin{aligned}\n&\\nabla = \\vec{e_r}\\frac{\\partial}{\\partial r}+\\vec{e_\\theta}\\frac{1}{r}\\frac{\\partial}{\\partial \\theta} + \\vec{e_\\phi}\\frac{1}{r\\sin \\theta}\\frac{\\partial}{\\partial \\phi} \\\\\n&\\nabla \\psi = \\frac{\\partial \\psi}{\\partial r}\\vec{e_r} + \\frac{1}{r}\\frac{\\partial \\psi}{\\partial \\theta}\\vec{e_\\theta}+\\frac{1}{r\\sin \\theta}\\frac{\\partial \\psi}{\\partial \\phi}\\vec{e_\\phi} \\\\\n&\\nabla \\cdot \\vec{A} = \\frac{1}{r^2}\\frac{\\partial}{\\partial r}(r^2 A_r) + \\frac{1}{r\\sin \\theta}\\frac{\\partial}{\\partial \\theta}(\\sin\\theta A_\\theta) + \\frac{1}{r\\sin\\theta}\\frac{\\partial}{\\partial \\phi}(A_\\phi) \\\\\n&\\nabla\\times\\vec{A} = \\frac{1}{r\\sin\\theta}\\left[\\frac{\\partial}{\\partial \\theta}(\\sin\\theta A_\\phi)-\\frac{\\partial}{\\partial\\phi}(A_\\theta)\\right]\\vec{e_r} + \\frac{1}{r}\\left[\\frac{1}{\\sin\\theta}\\frac{\\partial}{\\partial\\phi}(A_r)-\\frac{\\partial}{\\partial r}(rA_\\phi)\\right]\\vec{e_\\theta} +\\frac{1}{r}\\left[\\frac{\\partial}{\\partial r}(rA_\\theta)-\\frac{\\partial}{\\partial\\theta}A_r\\right]\\vec{e_\\phi} \\\\\n&\\nabla^2\\psi = \\frac{1}{r^2}\\frac{\\partial}{\\partial r}\\left(r^2\\frac{\\partial\\psi}{\\partial r}\\right)+\\frac{1}{r^2\\sin\\theta}\\frac{\\partial}{\\partial \\theta}\\left(\\sin\\theta\\frac{\\partial\\psi}{\\partial\\theta}\\right) + \\frac{1}{r^2\\sin^2\\theta}\\frac{\\partial^2\\psi}{\\partial\\phi^2}.\n\\end{aligned}\n$$\n\n### 柱坐标\n\n$$\n\\begin{aligned}\n&\\nabla = \\vec{e_r}\\frac{\\partial}{\\partial r}+\\vec{e_\\theta}\\frac{1}{r}\\frac{\\partial}{\\partial\\theta} + \\vec{e_z}\\frac{\\partial}{\\partial z} \\\\\n&\\nabla\\psi = \\frac{\\partial\\psi}{\\partial r}\\vec{e_r}+\\frac{1}{r}\\frac{\\partial\\psi}{\\partial\\theta}\\vec{e_\\theta}+\\frac{\\partial\\psi}{\\partial z}\\vec{e_z} \\\\\n&\\nabla\\cdot\\vec{A} = \\frac{1}{r}\\frac{\\partial}{\\partial r}(rA_r)+\\frac{1}{r}\\frac{\\partial}{\\partial\\theta}A_\\theta+\\frac{\\partial}{\\partial z}A_z \\\\\n&\\nabla\\times\\vec{A} = \\left(\\frac{1}{r}\\frac{\\partial A_z}{\\partial\\theta} - \\frac{\\partial A_\\theta}{\\partial z}\\right)\\vec{e_r} + \\left(\\frac{\\partial A_r}{\\partial z} -\\frac{\\partial A_z}{\\partial r}\\right)\\vec{e_\\theta} + \\frac{1}{r}\\left(\\frac{\\partial}{\\partial r}(rA_\\theta)-\\frac{\\partial A_r}{\\partial \\theta}\\right)\\vec{e_z} \\\\\n&\\nabla^2\\psi = \\frac{1}{r}\\frac{\\partial}{\\partial r}(r\\frac{\\partial \\psi}{\\partial r}) + \\frac{1}{r^2}\\frac{\\partial^2\\psi}{\\partial \\theta^2}+\\frac{\\partial^2 \\psi}{\\partial z^2}.\n\\end{aligned}\n$$\n\n--------------\n- 摘抄自郑大师电磁学讲义","tags":["math","数学","nabla"],"categories":["math","数学基础"]},{"title":"hexo建个人网站","url":"/2019/09/06/hexo/","content":"\n本站使用[hexo](https://hexo.io/)作为静态页面生成器，主题是[hexo-theme-stun](https://theme-stun.github.io/docs/)。\n\n<!-- more -->\n\n### 建站教程\n\n要建站，一般来说你需要一台远程服务器，还需要一个域名（网址）。不过这些github都可以免费提供给你，只需要在github建立一个仓库，命名为`账号名.github.io`。把网页上传到这个仓库，就可以在浏览器输入网址`https://账号名.github.io`浏览你自己的个人网站了。不过自己写网站还是很复杂，也不容易写的好看。hexo是一种静态页面生成器，可以将Markdown文件转化为网页，并协助你发布到github仓库。\n\n首先，根据[Easy Hexo](https://easyhexo.com/)教程安装并部署hexo，然后安装[hexo-theme-stun](https://theme-stun.github.io/docs/)主题，并按照网站的教程设置自己的一些信息。你也可以选择别的主题，在[Easy Hexo](https://easyhexo.com/)有其他的主题可以选择。\n\n#### tips\n\n不建议初学者按照[hexo](https://hexo.io/)网站介绍的方法部署到github。按照[Easy Hexo](https://easyhexo.com/)的教程来就行了。","tags":["hexo","个人网站"],"categories":["网站","hexo"]}]